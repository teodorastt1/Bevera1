@model Bevera.Models.ViewModels.PaginationViewModel

@if (Model.TotalPages > 1)
{
    <nav class="mt-3">
        <ul class="pagination justify-content-center">

            <li class="page-item @(Model.Page <= 1 ? "disabled" : "")">
                <a class="page-link"
                   asp-action="@Model.Action"
                   asp-controller="@Model.Controller"
                   asp-all-route-data="@(BuildRoutes(Model, Model.Page - 1))">
                    Prev
                </a>
            </li>

            @for (int p = 1; p <= Model.TotalPages; p++)
            {
                <li class="page-item @(p == Model.Page ? "active" : "")">
                    <a class="page-link"
                       asp-action="@Model.Action"
                       asp-controller="@Model.Controller"
                       asp-all-route-data="@(BuildRoutes(Model, p))">
                        @p
                    </a>
                </li>
            }

            <li class="page-item @(Model.Page >= Model.TotalPages ? "disabled" : "")">
                <a class="page-link"
                   asp-action="@Model.Action"
                   asp-controller="@Model.Controller"
                   asp-all-route-data="@(BuildRoutes(Model, Model.Page + 1))">
                    Next
                </a>
            </li>

        </ul>
    </nav>
}

@functions{
    private Dictionary<string, string?> BuildRoutes(Bevera.Models.ViewModels.PaginationViewModel m, int page)
    {
        var dict = new Dictionary<string, string?>(m.RouteValues);
        dict["page"] = page.ToString();
        return dict;
    }
}
