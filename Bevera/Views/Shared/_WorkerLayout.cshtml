@using Microsoft.AspNetCore.Identity
@inject SignInManager<Bevera.Models.ApplicationUser> SignInManager
@inject UserManager<Bevera.Models.ApplicationUser> UserManager

<!DOCTYPE html>
<html lang="bg">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - Bevera Worker</title>

    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="~/css/worker.css" asp-append-version="true" />

    <style>
        body { margin: 0; }
        .wk-shell { display: grid; grid-template-columns: 260px 1fr; min-height: 100vh; }
        .wk-side {
            background: #0f1214;
            color: rgba(255,255,255,.9);
            padding: 18px 16px;
            border-right: 1px solid rgba(255,255,255,.06);
        }
        .wk-brand { font-weight: 900; font-size: 20px; letter-spacing: .4px; }
        .wk-sub { color: rgba(255,255,255,.6); font-weight: 700; font-size: 12px; margin-top: 2px; }
        .wk-nav { margin-top: 18px; display: grid; gap: 6px; }
        .wk-nav a {
            display:flex; align-items:center; gap:10px;
            color: rgba(255,255,255,.82);
            text-decoration:none;
            padding: 10px 12px;
            border-radius: 14px;
            font-weight: 700;
        }
        .wk-nav a:hover { background: rgba(255,255,255,.06); color:#fff; }
        .wk-nav a.active { background: rgba(213,184,147,.18); color: #fff; }
        .wk-main { background: #f6f7f9; }
        .wk-top {
            display:flex; justify-content:space-between; align-items:center;
            padding: 14px 18px;
            background: #ffffff;
            border-bottom: 1px solid rgba(0,0,0,.06);
        }
        .wk-title { font-weight: 900; color: var(--spaceCadet); }
        .wk-user { display:flex; gap:10px; align-items:center; color:#333; font-weight:700; }
    </style>
</head>

<body>
    <div class="wk-shell">
        <aside class="wk-side">
            <div class="wk-brand">Bevera</div>
            <div class="wk-sub">Worker Panel</div>

            <nav class="wk-nav">
                <a asp-controller="Worker" asp-action="Index" class="@(ViewContext.RouteData.Values["controller"]?.ToString() == "Worker" && ViewContext.RouteData.Values["action"]?.ToString() == "Index" ? "active" : "")">
                    <i class="bi bi-grid-1x2"></i> Dashboard
                </a>
                <a asp-controller="Orders" asp-action="Index" class="@(ViewContext.RouteData.Values["controller"]?.ToString() == "Orders" ? "active" : "")">
                    <i class="bi bi-receipt"></i> Поръчки
                </a>
                <a asp-controller="Worker" asp-action="LowStock" class="@(ViewContext.RouteData.Values["controller"]?.ToString() == "Worker" && ViewContext.RouteData.Values["action"]?.ToString() == "LowStock" ? "active" : "")">
                    <i class="bi bi-exclamation-triangle"></i> За зареждане
                </a>
            </nav>

            <div class="mt-4" style="opacity:.7; font-size:12px; font-weight:800;">Account</div>
            <div class="mt-2">
                <form asp-area="Identity" asp-page="/Account/Logout" method="post" class="d-grid">
                    <button class="btn btn-sm btn-outline-light" type="submit">
                        <i class="bi bi-box-arrow-right me-1"></i> Logout
                    </button>
                </form>
            </div>
        </aside>

        <main class="wk-main">
            <div class="wk-top">
                <div class="wk-title">@ViewData["Title"]</div>
                <div class="wk-user">
                    <i class="bi bi-person-circle"></i>
                    <span>@User.Identity?.Name</span>
                </div>
            </div>

            @RenderBody()
        </main>
    </div>

    <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    @RenderSection("Scripts", required: false)
</body>
</html>
